prefix: "my-cluster"

zookeeper_url: localhost:2181 # url to zookeeper, when specified, ${ZOOKEEPER_URL} is exported when starting all services
# version: 1.0.0-rc5 # defaults to latest

services:

#  example: this is a name identifier for the service which can be changed to suit personal preferences
#   type: REQUIRED, monitor, table, web, api, auth, alerts
#   config: REQUIRED, </path/to/config.yml>
#   defaults: REQUIRED for table and monitor types, if neither, don't nest the below
#     host: REQUIRED, match a host in hosts section
#     port: REQUIRED, give the table partition a port
#     admin_port: REQUIRED, give the table partition an admin port
#     heap_opts: OPTIONAL, "-Xmx2g -Xms1g -XX:NewSize=1g"
#   env: OPTIONAL, exported on start
#     key: value
#     key1: value1
#   partitions: REQUIRED for table and monitor types only, specifies the partitions and their mappings
#     0: # use defaults

  
  # internal monitor table
  _system:
    type: monitor  
    config: dashbase-monitor/conf/config.yml
    defaults:
      host: host1
      port: 9888 # exported as PORT=9888
      admin_port: 9988 # exported as ADMINPORT=9988
      heap_opts: "-Xmx2g -Xms1g -XX:NewSize=1g"
    partitions:
      0: # use defaults

  # http firehose example table
  my-http: # just a name identifier; can be changed to suit personal preferences
    type: table
    config: dashbase-tables/http/conf/config.yml
    defaults: # required for default behavior, overridden when specified per partition
      host: host1
      port: 7888
      admin_port: 7988
      heap_opts: "-Xmx2g -Xms1g -XX:NewSize=1g" # optional, but recommend changing since default is "-Xmx1g -Xms1g -XX:NewSize=512m"
    env:
      MONITOR_URL: x.x.x.x:9888
    partitions:
      0: # use defaults
        # override defaults
        # host: host2
        # ...
        # heap_opts: "-Xmx4g -Xms2g -XX:NewSize=1g"
        # env:  # override env
        #   MONITOR_URL: ...

  # file firehose example nginx table json parser
  # my-json: # just a name identifier; can be changed to suit personal preferences
  #   type: table
  #   config: dashbase-tables/json/conf/config.yml
  #   defaults: # required for default behavior, overridden when specified per partition
  #     host: host1
  #     port: 7888
  #     admin_port: 7988
  #     heap_opts: "-Xmx2g -Xms1g -XX:NewSize=1g" # optional, but recommend changing since default is "-Xmx1g -Xms1g -XX:NewSize=512m"
  #   env:
  #     MONITOR_URL: <monitor_hostname:port>
  #   partitions:
  #     0: # use defaults
        # override defaults
        # host: host2
        # ...
        # heap_opts: "-Xmx4g -Xms2g -XX:NewSize=1g"
        # env:  # override env
        #   MONITOR_URL: ...

  # file firehose example nginx table regex parser
  # my-regex: # just a name identifier; can be changed to suit personal preferences
  #   type: table
  #   config: dashbase-tables/regex/conf/config.yml
  #   defaults: # required for default behavior, overridden when specified per partition
  #     host: host1
  #     port: 7888
  #     admin_port: 7988
  #     heap_opts: "-Xmx2g -Xms1g -XX:NewSize=1g" # optional, but recommend changing since default is "-Xmx1g -Xms1g -XX:NewSize=512m"
  #   env:
  #     MONITOR_URL: <monitor_hostname:port>
  #   partitions:
  #     0: # use defaults
        # override defaults
        # host: host2
        # ...
        # heap_opts: "-Xmx4g -Xms2g -XX:NewSize=1g"
        # env:  # override env
        #   MONITOR_URL: ...

  my-web: # just a name identifier; can be changed to suit personal preferences
    type: web
    host: host1
    port: 8080
    admin_port: 8180
    heap_opts: "-Xmx1g -Xms1g -XX:NewSize=512m" # optional, default is "-Xmx1g -Xms1g -XX:NewSize=512m"
    config: dashbase-web/conf/config.yml
    env:
      API_HOST: x.x.x.x # should match api host hostname
      API_PORT: 9876 # should match api port

  my-api: # just a name identifier; can be changed to suit personal preferences
    type: api
    host: host1
    port: 9876
    admin_port: 9976
    heap_opts: "-Xmx1g -Xms1g -XX:NewSize=512m"
    config: dashbase-api/conf/config.yml
    env:
      MONITOR_URL: x.x.x.x:9888

hosts:
  host1: # just a name identifier; can be changed to suit personal preferences
    hostname: <x.x.x.x> # e.g. x.x.x.x or http://someserver.com
    username: ec2-user # or an existing user on remote host
    private_key: </path/to/key.pem>
